# protoc-gen-go-bson

This plugin is meant to be used alongside the protoc-gen-go plugin to create wrapper structs for generated structs that have an ``Id`` field and other fields specific to MongoDB.

### Installation

```bash
go install github.com/herro-labs/protoc-gen-go-bson@latest
```

### Usage

Specify parameter ``--go-bson_out=<go_gen_out_dir>`` to allow the plugin to create a new file with wrapper structs:

```bash
protoc proto/example.proto --proto_path=proto \
--go_out=protogen --go_opt=paths=source_relative \
--go-bson_out=protogen
```

### Example

For the following proto file:

https://github.com/herro-labs/protoc-gen-go-bson/blob/a98b6c09ef807992902538e1aefe99590d5b69ec/example/proto/example.proto#L1-L26

The following file was generated by the protoc-gen-go-bson plugin:

https://github.com/herro-labs/protoc-gen-go-bson/blob/a98b6c09ef807992902538e1aefe99590d5b69ec/example/protogen/example_bson.pb.go#L1-L7

These generated go structs can used along with the generated structs created by the protoc-gen-go plugin to insert and find documents in MongoDB for example:

https://github.com/herro-labs/protoc-gen-go-bson/blob/a98b6c09ef807992902538e1aefe99590d5b69ec/example/main.go#L1-L63